# QEntL 自动编译器

QEntL自动编译器是一个用于监控源文件变更并自动编译QEntL程序的工具。当检测到文件变更时，编译器会自动将源代码编译为QEntL字节码文件(.qobj)。

## 功能特点

- 监控多个源代码目录
- 支持多种文件类型（默认：.qentl、.qent、.qjs）
- 自定义编译输出目录
- 可配置的编译延迟（防止频繁触发编译）
- 支持多种文件操作事件（创建、修改、删除）
- 支持启动时自动编译所有源文件
- 可配置的并发编译数量
- 详细的日志输出选项

## 使用方法

```bash
auto_compiler [选项]
```

### 命令行选项

| 选项 | 简写 | 描述 | 是否需要参数 |
|------|------|------|------------|
| --help | -h | 显示帮助信息 | 否 |
| --verbose | -v | 输出详细信息 | 否 |
| --output | -o | 指定输出目录 | 是 |
| --watch | -w | 指定要监视的源目录（可多次指定） | 是 |
| --ext | -e | 指定要监视的文件扩展名（可多次指定） | 是 |
| --no-compile | -n | 启动时不编译 | 否 |
| --delay | -d | 编译延迟（毫秒） | 是 |
| --concurrent | -c | 最大并发编译数 | 是 |

### 示例

监视当前目录，输出到build目录：
```bash
auto_compiler --output build
```

监视多个目录，使用详细输出：
```bash
auto_compiler --watch src --watch test --output build --verbose
```

只监视特定文件类型：
```bash
auto_compiler --ext qentl --ext qjs --output build
```

设置编译延迟和并发数：
```bash
auto_compiler --delay 1000 --concurrent 4 --output build
```

## 工作原理

1. 启动时，auto_compiler会解析命令行参数，设置监视目录和配置项。
2. 如果启用了启动时编译，会查找所有符合条件的源文件并加入编译队列。
3. 监视器开始运行，当检测到文件变更时：
   - 创建/修改：将文件加入编译队列
   - 删除：移除对应的输出文件
4. 编译队列使用延迟处理机制，防止频繁变更导致的过度编译。
5. 编译过程会保持原始目录结构，在输出目录中创建相应的.qobj文件。

## 配置最佳实践

- 对于大型项目，建议使用更长的编译延迟（800-1000ms）
- 对于多核处理器，可以增加并发编译数提高效率
- 使用`--verbose`选项可以帮助调试编译问题
- 排除不需要监视的目录可以提高性能

## 注意事项

- 自动编译器依赖QEntL核心编译器，确保系统中已正确安装
- 对于大型项目，首次启动时的全量编译可能需要较长时间
- 编译错误会在控制台中显示，但不会中断监视过程
- 按Ctrl+C可以安全停止自动编译器 